(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},33:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),s=n.n(c),o=n(5),u=n(22),l=n(19),i=n.n(l),m=n(14),p=n.n(m),f=n(2),E=n(20),_=function(){var e=Object(E.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api/posts.json").then((function(e){return e.json()}));case 2:return t=e.sent,e.next=5,fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api/users.json").then((function(e){return e.json()}));case 5:return n=e.sent,e.next=8,fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api/comments.json").then((function(e){return e.json()}));case 8:return a=e.sent,e.abrupt("return",t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{user:n.find((function(t){return e.userId===t.id})),comments:a.filter((function(t){return e.id===t.postId}))})})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var t=e.postUser.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"user__item"},r.a.createElement("span",{className:"user__name"},t)))},d=function(e){var t=e.comment,n=t.name,a=t.body,c=t.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"user_name"},n),r.a.createElement("p",{className:"user_email"},c),r.a.createElement("p",{className:"user_text"},a))},O=n(7),h=n(21),y=function(e){return e.posts},j=function(e){return e.loading},g=function(e){return e.errorMessage},N=function(e){return e.query},T=function(e){return e.posts.filter((function(t){var n=t.title,a=t.body;return"".concat(n," ").concat(a).toLocaleLowerCase().replace(/\s*/g," ").includes(e.filterQuery.toLocaleLowerCase().replace(/\s*/g," "))}))},v={posts:[],loading:!1,errorMessage:"",query:"",filterQuery:""},R=Object(O.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(f.a)(Object(f.a)({},e),{},{loading:!0,errorMessage:""});case"INIT_TODOS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,posts:t.posts});case"HANDLE_ERROR":return Object(f.a)(Object(f.a)({},e),{},{errorMessage:t.errorMessage,loading:!1});case"DELETE_POST":return Object(f.a)(Object(f.a)({},e),{},{posts:e.posts.filter((function(e){return e.title!==t.postTitle}))});case"SET_QUERY":return Object(f.a)(Object(f.a)({},e),{},{query:t.query});case"SET_FILTER_QUERY":return Object(f.a)(Object(f.a)({},e),{},{filterQuery:t.filterQuery});default:return e}}),Object(h.composeWithDevTools)()),L=function(e){var t=e.post,n=Object(o.b)(),a=t.title,c=t.body;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"post__title"},a),r.a.createElement("ul",{className:"post__user"},t.user&&r.a.createElement(b,{postUser:t.user})),r.a.createElement("p",{className:"post__text"},c),r.a.createElement("ul",{className:"post__comments"},t.comments&&t.comments.map((function(e){return r.a.createElement("li",{className:"post__comment",key:e.id},r.a.createElement(d,{comment:e}))}))),r.a.createElement("button",{type:"button",className:"delete_button",onClick:function(){return n({type:"DELETE_POST",postTitle:a})}},"Delete post"))},x=function(){var e=Object(o.c)(T);return r.a.createElement("ul",{className:"post__list"},e.map((function(e){return r.a.createElement("li",{className:"post__item",key:e.id},r.a.createElement(L,{post:e}))})))},I=(n(33),function(){var e=Object(o.b)(),t=Object(o.c)(y),n=Object(o.c)(j),c=Object(o.c)(g),s=Object(o.c)(N),u=Object(a.useCallback)(i()((function(t){return e({type:"SET_FILTER_QUERY",filterQuery:t})}),200),[]);return r.a.createElement("div",{className:"post"},r.a.createElement("h1",{className:"post__header"},"Redux list of posts"),0===t.length?r.a.createElement("button",{className:"button",type:"button",onClick:function(){e({type:"START_LOADING"}),_().then((function(t){e(function(e){return{type:"INIT_TODOS",posts:e}}(t))})).catch((function(t){e(function(e){return{type:"HANDLE_ERROR",errorMessage:e}}(t.message))}))}},n?"Loading...":"Load"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search"},r.a.createElement("label",{htmlFor:"search"},r.a.createElement("input",{className:"search__form",placeholder:"filter posts",type:"text",id:"search",value:s,onChange:function(t){var n=t.target.value;e(function(e){return{type:"SET_QUERY",query:e}}(n)),u(n)}}))),r.a.createElement(x,null)),c&&r.a.createElement("p",{className:"post__error"},"Error: ".concat(c)))}),S=function(){return r.a.createElement(o.a,{store:R},r.a.createElement(u.a,null,r.a.createElement(I,null)))};s.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.e62c0be1.chunk.js.map